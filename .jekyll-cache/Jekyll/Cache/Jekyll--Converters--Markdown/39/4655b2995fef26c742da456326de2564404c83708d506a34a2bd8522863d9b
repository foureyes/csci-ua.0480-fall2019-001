I"Õ[<style>
.warning {
    background-color: #eecccc;
}
</style>

<div class="panel panel-default">
	<div class="panel-heading">Homework #7</div>
	<div class="panel-body">

    <h1 id="one-hand-of-blackjack-client-side-javascript---due-friday-nov-17th-by-11pm">One Hand of Blackjack (Client Side JavaScript) - <strong>Due Friday, Nov 17th, by 11PM</strong></h1>

    <h2 id="overview">Overview</h2>

    <h3 id="goals--topics-covered">Goals / Topics Covered</h3>

    <p>You&#39;ll be using the following concepts:</p>

    <ul>
      <li>manipulating the DOM by creating and adding elements</li>
      <li>setting DOM element attributes</li>
      <li>handling events with <code class="highlighter-rouge">addEventListener</code></li>
      <li>stopping form submission with <code class="highlighter-rouge">preventDefault</code></li>
      <li>using CSS to arrange elements with <code class="highlighter-rouge">position</code> and <code class="highlighter-rouge">display</code></li>
    </ul>

    <h3 id="description">Description</h3>

    <p>Create a two-player (user vs computer) client-side card game. The card game will be <strong>a single hand</strong> of blackjack. If you&#39;re unfamiliar with the rules:</p>

    <ul>
      <li>each player will try to construct a hand of cards that&#39;s equal to 21 or as close to 21 as possible, without going over
        <ul>
          <li>the sum of the numeric values of the cards determine the value of a hand</li>
          <li>face cards are worth 10</li>
          <li>aces are worth 1 or 11</li>
          <li>the player with the hand closest to (or equal to) 21 wins</li>
          <li>ties are possible</li>
        </ul>
      </li>
      <li>each player is dealt 2 cards from a 52 card deck, with each card representing some numeric value</li>
      <li>in our version, the initial cards are dealt to the computer and user in an alternating fashion, with the computer being dealt the 1st card:
        <ul>
          <li>the computer is dealt one card, and the user is dealt another card</li>
          <li>this repeats one more time so that both the user and computer have 2 cards each</li>
        </ul>
      </li>
      <li>once the initial two cards are dealt, the user can choose to be dealt more cards (&quot;hit&quot;) or stop being dealt cards (&quot;stand&quot;)
        <ul>
          <li>if the user&#39;s hand ends up exceeding 21, then the user automatically loses</li>
          <li>if the user chooses to &quot;stand&quot; (to stop being dealt cards), then the computer can choose to continually &quot;hit&quot; or &quot;stand&quot;</li>
        </ul>
      </li>
      <li>once both players have either chosen to stand or have a hand with a total that&#39;s more than 21 (&quot;bust&quot;), the hands are compared
        <ul>
          <li>the player with the hand that&#39;s closest to 21 without going over wins</li>
          <li>again ties are possible (either same total, or both player &quot;bust&quot;)</li>
        </ul>
      </li>
    </ul>

    <p>Here&#39;s an example of what your game may look like:</p>

    <p><img src="/csci-ua.0480-fall2017-007/resources/img/hw07-blackjack-01-overview.gif" alt="Demo" /></p>

    <h3 id="submission-process">Submission Process</h3>

    <p>You will be given access to a private repository on GitHub.  The final version of your assignment should be in GitHub</p>

    <ul>
      <li><strong>Push</strong> your changes to the homework repository on GitHub.</li>
    </ul>

    <h3 id="make-at-least-4-commits">Make at Least 4 Commits</h3>

    <ul>
      <li>Commit multiple times throughout your development process.</li>
      <li>Make at least 4 separate commits</li>
    </ul>

    <h2 id="blackjack-game-requirements">Blackjack Game Requirements</h2>

    <p>There are three main features required for the game:</p>

    <ol>
      <li>An initial screen where the user can enter a series of comma separated face values (2 - 10, J, Q, K, A) that will set the cards of the top of the deck to those values
        <ul>
          <li>Consequently, if a user puts in 2,3,4,5 &#8230;. 2 will be on the top of the deck, 3 next, etc.</li>
          <li>So when hands are dealt, the computer will be dealt a 2 and a 4, and the player will be dealt a 3 and a 5</li>
        </ul>
      </li>
      <li>A client-side JavaScript implementation of one hand of blackjack</li>
      <li>A small amount of styling:
        <ul>
          <li>the cards in a hand should appear adjacent to each other</li>
          <li>cards should have a height and a width</li>
          <li><em>some effort</em> should be made to make the game appear visually polished</li>
        </ul>
      </li>
    </ol>

    <h2 id="setup-and-initial-screen">Setup and Initial Screen</h2>

    <h3 id="create-an-express-application-and-setup-some-directories">Create an express application and setup some directories</h3>

    <ol>
      <li>You don&#39;t <em>really</em> need an Express application to do this homework, but start with one anyway, in case you decide to do the extra credit&#8230;</li>
      <li>Start a new express project that uses express-static, using the following directory structure:
        <ul>
          <li><code class="highlighter-rouge">package.json</code></li>
          <li><code class="highlighter-rouge">.eslintrc.js</code></li>
          <li><code class="highlighter-rouge">README.md</code></li>
          <li><code class="highlighter-rouge">src</code>
            <ul>
              <li><code class="highlighter-rouge">app.js</code></li>
              <li><code class="highlighter-rouge">public</code>
                <ul>
                  <li><code class="highlighter-rouge">index.html</code></li>
                  <li><code class="highlighter-rouge">stylesheets</code>
                    <ul>
                      <li><code class="highlighter-rouge">style.css</code></li>
                    </ul>
                  </li>
                  <li><code class="highlighter-rouge">javascripts</code>
                    <ul>
                      <li><code class="highlighter-rouge">main.js</code></li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>(there&#39;s no need to create any route handlers for this homework, you can do the whole thing with static files)</li>
      <li>In your public folder, create an <code>index.html</code> file.</li>
      <li>In your public folder, create a <code class="highlighter-rouge">stylesheets</code> folder and a file, <code class="highlighter-rouge">style.css</code>, within it</li>
      <li>In your public folder, create a <code class="highlighter-rouge">javascripts</code> folder and a file, <code class="highlighter-rouge">main.js</code>, within it</li>
    </ol>

    <h3 id="create-a-form">Create a form</h3>

    <ol>
      <li>Add the following code to your <code>index.html</code> (it will be the only markup in your project, everything else will be generated with JavaScript):
        <pre><code data-trim="" contenteditable="">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Cards!&lt;/title&gt;
&lt;link rel="stylesheet" href="stylesheets/style.css" type="text/css" media="screen" title="no title" charset="utf-8"&gt;
&lt;meta charset="utf-8" /&gt; 
&lt;/head&gt;
&lt;body&gt;
&lt;script src="javascripts/main.js"&gt;&lt;/script&gt;
&lt;div class="start"&gt;
  &lt;form method="POST" action=""&gt;
 &lt;label for="startValues"&gt;Start Values:&lt;/label&gt; &lt;input type="text" name="startValues" id="startValues"&gt;  
 &lt;input class="playBtn" type="submit" value="Play"&gt;  
  &lt;/form&gt;
&lt;/div&gt;
&lt;div class="game"&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
      </li>
      <li>Test that your form shows up when you go to <code class="highlighter-rouge">http://localhost:3000</code></li>
      <li><strong>You are not allowed to use any additional markup, and you cannot modify the markup above</strong>; you must generate any additional elements you&#39;ll need with JavaScript</li>
    </ol>

    <h3 id="initialize-your-javascript">Initialize your JavaScript</h3>

    <p>Note that <code class="highlighter-rouge">main.js</code> is included at the top of the body. This means that the code within it may run before the rest of the page (DOM) is actually available to manipulate. This problem will result in:</p>

    <ol>
      <li>a failure to find an element that <em>should</em> exist (when using <code class="highlighter-rouge">document.getElementById</code>, <code class="highlighter-rouge">querySelector</code>, etc.)</li>
      <li>which most likely will manifest itself as an undefined object</li>
    </ol>

    <p>So, <strong>to delay the running of your JavaScript until the page has completely loaded</strong> (and without changing the markup, use <code class="highlighter-rouge">document.addEventListener</code> to call the main line of execution for your program only when the DOM has completely loaded. Follow these steps to do this:</p>

    <ol>
      <li>in <code class="highlighter-rouge">main.js</code>, create a function called <code class="highlighter-rouge">main</code> - this will be where your game code resides (of course, you can create other functions, but you <em>should</em> have at least a main function)</li>
      <li>after that, add the following line to make sure that the <code class="highlighter-rouge">main</code> function is only run when the DOM is completely loaded:  <code class="highlighter-rouge">document.addEventListener('DOMContentLoaded', main);</code></li>
    </ol>

    <h3 id="handle-the-form-submission-and-modify-the-user-interface">Handle the Form Submission and Modify the User Interface</h3>

    <p>Submitting the form hides the original form and distributes (deals) cards to the computer and user. If the user entered a list of card faces in the form before submitting, then those cards will be dealt first from the top of the deck.</p>

    <p>Start off by handling the submit button on the form and making the form disappear. Use a combination of <code class="highlighter-rouge">document.querySelector</code> and <code class="highlighter-rouge">addEventListener</code> to allow the submit button on the form to be pressed:</p>

    <ul>
      <li>see the <a href="../slides/19/js-css.html#/6">slides on <code class="highlighter-rouge">document.querySelector</code></a> or the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector">mdn documentation</a></li>
      <li>check out the <a href="../slides/19/events.html#/">slides on events</a></li>
      <li>&#8230;along with mdn&#39;s documentation on <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener">addEventListener</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/Events/click">click</a>, and <a href="https://developer.mozilla.org/en-US/docs/Web/Events/DOMContentLoaded">DOMContentLoaded</a></li>
      <li>because the button in the form is a submit button, it&#39;ll <em>actually</em> make a GET or POST request when pressed; we don&#39;t want this to happen, so we&#39;ll use <a href="../slides/19/events.html#/15">preventDefault</a> to stop the default action from occurring on a click event</li>
      <li>and lastly, the <a href="../slides/19/css.html#/56">slides</a> on <a href="../slides/19/css.html#/7">classList</a> will show you how to add, remove and toggle css classes on elements</li>
      <li>Remember, you&#39;ll need to put all of your DOM dependant JavaScript in a <code>DOMContentLoaded</code> listener (which you already did above)</li>
      <li>and, of course, you&#39;ll need to add a <code>click</code> event listener for your submit button</li>
      <li>within the callback to your <code class="highlighter-rouge">click</code> event listener:
        <ol>
          <li>make sure to call <code class="highlighter-rouge">preventDefault</code> (see the <a href="slides/19/events.html#/15">slides on events</a>) to stop the form from submitting</li>
          <li>create and apply the appropriate CSS classes to get rid of the <em>form</em> (do this with styles, there&#39;s no need to remove the element) to make room for displaying cards (in addition to the slides above, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/classList">here&#39;s the mdn docs on classList</a>)</li>
        </ol>
      </li>
      <li><span class="warning">Note that <code class="highlighter-rouge">this</code> within the callback passed to <code class="highlighter-rouge">addEventListener</code> will refer to the element that was clicked on, as long as the function you use is not an arrow function</span>
        <ul>
          <li>For example&#8230;.</li>
          <li>Using this markup: <code class="highlighter-rouge">&lt;div id="clicker"&gt;Click Me&lt;/div&gt;</code></li>
          <li>Using this JavaScript: <code class="highlighter-rouge">document.querySelector('#clicker').addEventListener('click', myCallback)</code></li>
          <li><code class="highlighter-rouge">this</code> within <code class="highlighter-rouge">function myCallback</code> will refer to the original div element clicked on!</li>
        </ul>
      </li>
    </ul>

    <p><img src="/csci-ua.0480-fall2017-007/resources/img/hw07-blackjack-02-form.gif" alt="Demo" /></p>

    <h3 id="generate-a-deck-of-cards-and-deal-cards">Generate a Deck of Cards and Deal Cards</h3>

    <p>Once you&#39;ve gotten rid of the form, generate a deck of cards and distribute a hand to the user and the computer (optionally setting the top cards to the values set in the form above).</p>

    <ul>
      <li>Note that there was a text field in the original form - this can be used to set the cards at the top of the deck
        <ul>
          <li>If the player enters a value in this field, then the cards on top of the deck are set to the sequence inputted</li>
          <li>The input should be a comma separated list of characters and/or numbers (for example <code class="highlighter-rouge">K,2,3,7</code>), the suit of the cards can be any suit (in the example below, all of the specified cards were given a default suit of diamonds)</li>
          <li>No validation is required (assume that the user puts in valid input or no input)</li>
          <li>You can retrieve the user input from the text field by using the <code class="highlighter-rouge">value</code> property on the form element that contains the user input - <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement">see the mdn docs on value under HTML Input Element</a></li>
        </ul>
      </li>
      <li><strong>The following should done programmatically via client side JavaScript</strong> (the graphical part will be specified in the next section)</li>
      <li>Generate a deck of 52 shuffled cards (perhaps an Array of objects?)</li>
      <li>If there were card faces that were entered in the form above&#8230;
        <ul>
          <li>add those cards to the top of the deck (again, you can just pick a suit; it&#39;s the faces that matter)</li>
          <li>these cards will be dealt first, alternating between the computer and the user</li>
          <li>for example, if the cards 2, 5, 2, 5, J, Q, K, then:
            <ul>
              <li>the computer would get a 2 and 2</li>
              <li>the user would get a 5 and 5</li>
              <li>the next cards dealth (from pressing the &quot;Hit&quot; button) would be J, Q, and K</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Deal the cards - alternate between the computer and player
        <ul>
          <li>the computer gets the first and third card</li>
          <li>the player gets the second card and fourth card</li>
        </ul>
      </li>
    </ul>

    <h3 id="display-the-cards-and-user-interface">Display the Cards and User Interface</h3>

    <p>Based on the cards dealt, add elements to the user interface to represent both the user&#39;s and computer&#39;s hands (set of cards).</p>

    <ul>
      <li>Create DOM elements to represent cards
        <ul>
          <li>Check out the slides and mdn documentation on modifying and creating elements
            <ul>
              <li><a href="../slides/18/modifying-creating.html#/1">slides on adding and removing elements</a></li>
              <li><a href="../slides/18/modifying-creating.html#/5">slides on changing an elements text</a></li>
              <li><a href="../slides/18/modifying-creating.html#/7">slides on creating elements</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/createElement">mdn docs on <code class="highlighter-rouge">createElement</code></a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/createTextNode">mdn docs on <code class="highlighter-rouge">createTextNode</code></a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/appendChild">mdn docs on <code class="highlighter-rouge">appendChild</code></a></li>
            </ul>
          </li>
          <li>You should consider writing some helper functions for creating and adding elements</li>
          <li>For example, one of our books introduces <a href="http://eloquentjavascript.net/13_dom.html#c_Mnkp5ioh9C">a function to create an element and add children immediately</a></li>
          <li>Programmatically create elements to represent cards</li>
          <li>All of the computer&#39;s cards should appear next to each other horizontally - one of the cards should not be revealed</li>
          <li>All of the user&#39;s cards should appear next to each other horizontally</li>
          <li>All of the cards should have a width and height</li>
          <li>Hint: to lay out elements adjacent to each other and still maintain a width and height, you can use &#8230;
            <ul>
              <li><code>display: inline-block</code></li>
              <li><code>display: flex</code></li>
              <li>a <code>table</code></li>
              <li>or <code>float</code> your elements</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Calculate the hand total for both the computer and the user
        <ul>
          <li>Remember that aces can be 1 or 11</li>
          <li>Make sure that your algorithm optimizes the values of aces so that the hand total is as close to 21 as possible without going over</li>
        </ul>
      </li>
      <li>Create two elements to display the computer and user total
        <ul>
          <li>the computer total should be displayed as ?</li>
          <li>the user total should reflect the total in the user&#39;s hand</li>
        </ul>
      </li>
      <li>Create two buttons, <code class="highlighter-rouge">Hit</code> and <code class="highlighter-rouge">Stand</code></li>
      <li>See an example interaction below:</li>
      <li><span class="warning">THE STYLING IN THE ANIMATED GIFS IS JUST FOR EMBELLISHMENT; YOUR STYLING DOES NOT HAVE TO MATCH</span>
        <ul>
          <li>(but you should put in some effort to make the cards <em>card-like</em>)</li>
        </ul>
      </li>
    </ul>

    <p><img src="/csci-ua.0480-fall2017-007/resources/img/hw07-blackjack-03-deal.gif" alt="Deal" /></p>

    <h3 id="hit-and-stand">Hit and Stand</h3>

    <p>Once user&#39;s hand and the computer&#39;s hand are displayed after the initial deal, the user can now decide whether they want more cards or stay with the cards that they have. The previous section added buttons (Hit and Stand), but now you&#39;ll have to add event listeners to those buttons.</p>

    <ol>
      <li>pressing <code class="highlighter-rouge">Hit</code> should deal the next card from the deck
        <ul>
          <li>the next card should be moved from the deck to the user&#39;s hand</li>
          <li>an element should be created to add the card to the user&#39;s hand in the user interface</li>
          <li>if hitting makes a user&#39;s total go over 21:
            <ul>
              <li>then the user&#39;s turn ends immediately</li>
              <li>&#8230; and they lose the hand</li>
              <li>(the computer does not even need to decided to hit or stand)</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>pressing <code class="highlighter-rouge">Stand</code> should end the user&#39;s turn and allow the computer to Hit or Stand
        <ul>
          <li>the computer&#39;s strategy is your discretion</li>
          <li>though the computer must hit in some situations or stand in others</li>
          <li>an easy strategy is to always hit if a hand total is underneath a threshold, but stand if it&#39;s eqaul to or above that threshold</li>
        </ul>
      </li>
    </ol>

    <p>The following is an example of the user:</p>

    <ol>
      <li>hitting twice</li>
      <li>then going over 21 (busting)</li>
      <li>(and consequently, immediately losing the hand)</li>
    </ol>

    <p><img src="/csci-ua.0480-fall2017-007/resources/img/hw07-blackjack-04-play.gif" alt="Play" /></p>

    <h3 id="determine-the-winner">Determine the winner</h3>

    <p>Once the user and computer have both decided to &quot;stand&quot; or have a hand total over 21&#8230;</p>

    <ol>
      <li>Compare the computer&#39;s score with the user&#39;s score</li>
      <li>The player with the score closer to or equal to 21 wins</li>
      <li>Add text to indicate of who won</li>
      <li>If the player went over 21, they lose automatically</li>
      <li><strong>A tie is possible</strong></li>
    </ol>

    <p>Below is an example of the user winning a hand:</p>

    <p><img src="/csci-ua.0480-fall2017-007/resources/img/hw07-blackjack-05-win.gif" alt="Win" /></p>

    <h3 id="optional-features-extra-credit">Optional Features (Extra Credit)</h3>

    <p>Implement any of the following features for extra credit.</p>

    <p><span class="warning">If you are implementing extra credit:</span></p>

    <ol>
      <li>add a README.md to the root of your project</li>
      <li>add notes specifying which extra credit you did</li>
    </ol>

    <p>(5 points) <strong>Reset hand</strong></p>

    <ul>
      <li>when a hand ends, remove the <code class="highlighter-rouge">Hit</code> and <code class="highlighter-rouge">Stand</code> buttons and add a <code class="highlighter-rouge">Restart</code> button along the bottom row</li>
      <li>when the <code class="highlighter-rouge">Restart</code> button is pressed, it resets the game so that:
        <ul>
          <li>the computer and player hands are cleared</li>
          <li>new cards are dealt</li>
          <li>the <code class="highlighter-rouge">Hit</code> and <code class="highlighter-rouge">Stand</code> button are added back</li>
        </ul>
      </li>
    </ul>

    <p>(10 points) <strong>Save results in database</strong></p>

    <ul>
      <li>when the game ends, allow the user to enter their initials in a form</li>
      <li>when the form is submitted:
        <ul>
          <li>save the results of this hand (the computer scores and the user score) in the database, along with the user&#39;s initials</li>
          <li>display the results of the last 5 hands</li>
        </ul>
      </li>
      <li>if this is combined with the reset hand, then place the restart button after the form has been submitted</li>
    </ul>

  </div>
</div>

:ET