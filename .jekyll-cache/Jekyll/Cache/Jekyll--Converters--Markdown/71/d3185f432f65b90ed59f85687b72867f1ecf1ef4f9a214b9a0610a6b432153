I" Â<div class="panel panel-default">
  <div class="panel-heading">Homework #2</div>
  <div class="panel-body">

    <h1 id="higher-order-functions-exercises-and-processing-data---due-thursday-september-28th-by-11pm">Higher Order Functions: Exercises and Processing Data - <strong>Due Thursday, September 28th, by 11PM</strong></h1>

    <h2 id="overview">Overview</h2>

    <h3 id="description">Description</h3>

    <p><strong>hoffy.js</strong> - Write a series of functions that demonstrate the use of the rest operator (or call/apply), and higher order functions</p>

    <p><strong>yelpfunc.js</strong> and <strong>report.js</strong> - Print out a report analyzing yelp restaurant (business) data. There are two parts to this:</p>

    <ul>
      <li>An initial version that works off of a local JSON file</li>
      <li>An second version that works off of remote urls and additional data (you can overwrite the previous part with this code)</li>
    </ul>

    <p>See the <a href="#hw02-sample">sample output</a> at the end of these instructions.</p>

    <h3 id="submission-process">Submission Process</h3>

    <p>You will be given access to a private repository on GitHub. It will contain unit tests, stub files for your code, a <code class="highlighter-rouge">package.json</code> and a <code class="highlighter-rouge">.eslintrc</code></p>

    <ul>
      <li>The final version of your assignment should be in GitHub.</li>
      <li><strong>Push</strong> your changes to the homework repository on GitHub.</li>
    </ul>

    <h3 id="points-make-at-least-4-commits">(4 points) Make at Least 4 Commits</h3>

    <ul>
      <li>Commit multiple times throughout your development process.</li>
      <li>Make at least 4 separate commits - (for example, one option may be to make one commit per part in the homework).</li>
    </ul>

    <h2 id="part-1---setup-and-exercises">Part 1 - Setup and Exercises</h2>

    <p>For this homework, you&#39;ll have files available in your repository, so you&#39;ll be cloning first.</p>

    <p>The solutions to the following problems can go in the same file - <strong>src/hoffy.js</strong>:</p>

    <h3 id="setup">Setup</h3>

    <ol>
      <li>go to your github account&#8230;</li>
      <li>find your repository: NetID-homework02 (note&#8230; this <strong>should be your NetID</strong>)</li>
      <li>use the appropriate URL to run git clone</li>
    </ol>

    <pre><code data-trim="" contenteditable="">git clone [YOUR REPO URL]</code></pre>

    <h3 id="background-info">Background Info</h3>

    <p>Implement functions that use JavaScript features such as:</p>

    <ul>
      <li>the rest operator</li>
      <li>the spread operator</li>
      <li>functions as arguments</li>
      <li>functions as return values</li>
      <li>decorators</li>
      <li>optionally call/apply/bind</li>
      <li>optionally arrow functions</li>
      <li>Array methods: &#39;filter&#39;, &#39;map&#39;, &#39;reduce&#39;</li>
    </ul>

    <p>Go through the functions in order; the concepts explored build off one-another, and the functions become more and more challenging to implement as you go on.</p>

    <p><strong>Do not use</strong>:</p>

    <ul>
      <li><code class="highlighter-rouge">while</code> loops</li>
      <li><code class="highlighter-rouge">for</code> loops</li>
      <li><code class="highlighter-rouge">for ... in</code> loops</li>
      <li><code class="highlighter-rouge">for ... of</code> loops</li>
      <li><code class="highlighter-rouge">forEach</code> method .</li>
    </ul>

    <p><strong>There will a small (-2) penalty every time one is used</strong>. (Homework is 100 points total)</p>

    <h3 id="steps">Steps</h3>

    <ol>
      <li>prep&#8230;
        <ul>
          <li>create a <code class="highlighter-rouge">.gitignore</code> to ignore node_modules</li>
          <li>make sure that <code class="highlighter-rouge">mocha</code>, <code class="highlighter-rouge">chai</code>, and <code class="highlighter-rouge">eslint</code> are still installed (similar to previous assignment)
            <pre><code data-trim="" contenteditable="">npm install -g mocha
npm install --save-dev eslint
npm install --save-dev chai
</code></pre>
          </li>
          <li>you&#39;ll also need a few additional modules installed locally for the unit tests to run:
            <ul>
              <li>finally, install sinon and mocha-sinon locally for mocking <code class="highlighter-rouge">console.log</code> (these are for unit tests)</li>
              <li><code class="highlighter-rouge">npm install --save-dev sinon</code></li>
              <li><code class="highlighter-rouge">npm install --save-dev mocha-sinon</code></li>
            </ul>
          </li>
        </ul>
      </li>
      <li>implement functions below in <strong>hoffy.js</strong></li>
      <li>make sure you export your functions as you implement them so that&#8230;</li>
      <li>you can run tests as you develop these functions (again, the tests are included in the repository):
 <code class="highlighter-rouge">mocha tests/hoffy-test.js</code></li>
      <li>also remember to run eslint (there&#39;s a <code class="highlighter-rouge">.eslintrc</code> file included in the repository):
 <code class="highlighter-rouge">node_modules/.bin/eslint src/*</code></li>
    </ol>

    <h3 id="points-functions-to-implement">(40 points) Functions to Implement</h3>

    <h3 id="per-while-for-foreach-for-of-or-for-in-loop-used">(-2 per while, for, forEach, for of, or for in loop used)</h3>

    <hr />

    <h3 id="sumnum1-num2--numn"><code class="highlighter-rouge">sum(num1, num2, ... numn)</code></h3>

    <p><strong>Parameters:</strong></p>

    <ul>
      <li><code class="highlighter-rouge">num1</code>, <code class="highlighter-rouge">num2</code> &#8230; <code class="highlighter-rouge">numn</code> - the values to be summed</li>
    </ul>

    <p><strong>Returns:</strong></p>

    <ul>
      <li>the sum of the arguments as a <code class="highlighter-rouge">Number</code></li>
      <li>the sum of no arguments is 0</li>
    </ul>

    <p><strong>Description:</strong></p>

    <p>Adds all of the arguments together and returns the resulting sum. If there are no arguments, the resulting sum is 0. Does not have to check for types.</p>

    <p>Hints:</p>

    <ul>
      <li>use <code class="highlighter-rouge">rest</code> parameters!</li>
    </ul>

    <p><strong>Example:</strong></p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// returns the sum of all arguments passed in
sum(1, 2, 3) // --&gt; 6
sum(1, 1, 1, 1, 1, 1, 1, 1, 1, 1) // --&gt; 10
sum(1) // --&gt; 1

// returns 0 if there are no arguments passed in
sum() // --&gt; 0
</code></pre></div>    </div>

    <hr />

    <h3 id="repeatcallfn-n-arg"><code class="highlighter-rouge">repeatCall(fn, n arg)</code></h3>

    <p><strong>Parameters:</strong></p>

    <ul>
      <li><code class="highlighter-rouge">fn</code> - the function to be called repeatedly</li>
      <li><code class="highlighter-rouge">n</code> - the number of times to call function, <code class="highlighter-rouge">fn</code></li>
      <li><code class="highlighter-rouge">arg</code> - the argument to pass to function, <code class="highlighter-rouge">fn</code>, when it is called</li>
    </ul>

    <p><strong>Returns:</strong></p>

    <ul>
      <li><code class="highlighter-rouge">undefined</code> (no return value)</li>
    </ul>

    <p><strong>Description:</strong></p>

    <p>This function demonstrates using functions as an argument or arguments to another function. It calls function, <code class="highlighter-rouge">fn</code>, <code class="highlighter-rouge">n</code> times, passing in the argument, <code class="highlighter-rouge">arg</code> to each invocation / call.  It will ignore the return value of function calls. Note that it passes in only one <code class="highlighter-rouge">arg</code>. Check out the <a href="http://eloquentjavascript.net/05_higher_order.html">readings</a> or <a href="../slides/js/higher-order-functions-continued.html">slides</a> on higher order functions for relevant background material and examples.</p>

    <p><strong>Example:</strong></p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>repeatCall(console.log, 3, "Hello!");
// prints out:
// Hello!
// Hello!

// calls console.log twice, each time passing in only the first argument
// (we'll see how to fix this later)
repeatCall(console.log, 2, "foo", "bar", "baz", "qux", "quxx", "corge");
    
// prints out (again, only 1st arg is passed in):
// foo 
// foo 
</code></pre></div>    </div>

    <hr />

    <h3 id="repeatcallallargsfn-n-args1--argsn"><code class="highlighter-rouge">repeatCallAllArgs(fn, n, args1 ... argsn)</code></h3>

    <p><strong>Parameters:</strong></p>

    <ul>
      <li><code class="highlighter-rouge">fn</code> - the function to be called repeatedly</li>
      <li><code class="highlighter-rouge">n</code> - the number of times to call function, <code class="highlighter-rouge">fn</code></li>
      <li><code class="highlighter-rouge">args1 ... argsn</code> - <em>all</em> of the arguments to pass in to the function <code class="highlighter-rouge">fn</code> when it is called</li>
    </ul>

    <p><strong>Returns:</strong></p>

    <ul>
      <li><code class="highlighter-rouge">undefined</code> (no return value)</li>
    </ul>

    <p><strong>Description:</strong></p>

    <p>This is pretty much the same function as the previous, but it also demonstrates using a variable number of arguments. It calls function, <code class="highlighter-rouge">fn</code>, <code class="highlighter-rouge">n</code> times, passing in all of the remaining arguments that were passed to the original function, as the arguments to the <code class="highlighter-rouge">fn</code> function invocation. It will ignore the return value of function calls. Here are some hints:</p>

    <ul>
      <li>use <code class="highlighter-rouge">rest</code> parameters and <code class="highlighter-rouge">spread</code></li>
      <li>or use the <code class="highlighter-rouge">arguments</code> object along with <code class="highlighter-rouge">apply</code></li>
    </ul>

    <p><strong>Example:</strong></p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// calls console.log twice, each time passing in the args, "foo", "bar", ... "corge"
repeatCallAllArgs(console.log, 2, "foo", "bar", "baz", "qux", "quxx", "corge");
    
// prints out:
// foo bar baz qux quxx corge
// foo bar baz qux quxx corge
</code></pre></div>    </div>

    <hr />

    <h3 id="maybefn"><code class="highlighter-rouge">maybe(fn)</code></h3>

    <p><strong>Parameters:</strong></p>

    <ul>
      <li><code class="highlighter-rouge">fn</code> - the function to be called</li>
    </ul>

    <p><strong>Returns:</strong></p>

    <ul>
      <li>a new <code class="highlighter-rouge">function</code> or <code class="highlighter-rouge">undefined</code> - the <code class="highlighter-rouge">function</code> calls the original function</li>
    </ul>

    <p><strong>Description:</strong></p>

    <p><code class="highlighter-rouge">maybe</code> will take a function, <code class="highlighter-rouge">fn</code> and return an entirely new function that behaves mostly like the original function, <code class="highlighter-rouge">fn</code> passed in, but will return undefined if any <code class="highlighter-rouge">null</code> or <code class="highlighter-rouge">undefined</code> arguments are passed in to <code class="highlighter-rouge">fn</code>.</p>

    <p>The new function will take the same arguments as the original function (<code class="highlighter-rouge">fn</code>). Consequently when the new function is called, it will use the arguments passed to it and call the old function and return the value that&#39;s returned from the old function. However, if any of the arguments are <code class="highlighter-rouge">undefined</code> or <code class="highlighter-rouge">null</code>, the old function is not called, and <code class="highlighter-rouge">undefined</code> is returned instead. You can think of it as a way of calling the old function only if all of the arguments are not <code class="highlighter-rouge">null</code> or not <code class="highlighter-rouge">undefined</code>.</p>

    <p><strong>Example:</strong></p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function createFullName(firstName, lastName) {
    return `${firstName} ${lastName}`; 
}
maybe(createFullName)('Frederick', 'Functionstein'); // Frederick Functionstein
maybe(createFullName)(null, 'Functionstein');        // undefined
maybe(createFullName)('Freddy', undefined);          // undefined 
</code></pre></div>    </div>

    <hr />

    <h3 id="constraindecoratorfn-min-max"><code class="highlighter-rouge">constrainDecorator(fn, min, max)</code></h3>

    <p><strong>Parameters:</strong></p>

    <ul>
      <li><code class="highlighter-rouge">fn</code> - the function to modify (<em>decorate</em>)</li>
      <li><code class="highlighter-rouge">min</code> - the minimum value that <code class="highlighter-rouge">fn</code> can return</li>
      <li><code class="highlighter-rouge">max</code> - the maximum value that <code class="highlighter-rouge">fn</code> can return</li>
    </ul>

    <p><strong>Returns:</strong></p>

    <ul>
      <li><code class="highlighter-rouge">function</code> - a function that&#8230;
        <ul>
          <li>does the same thing as the original function, <code class="highlighter-rouge">fn</code> (that is, it calls the original function)</li>
          <li>accepts the same number of arguments as the original function, <code class="highlighter-rouge">fn</code></li>
          <li>the return value is the return value of <code class="highlighter-rouge">fn</code>, unless it is less than or greater than the <code class="highlighter-rouge">min</code> and <code class="highlighter-rouge">max</code>, in which case it returns <code class="highlighter-rouge">min</code> or <code class="highlighter-rouge">max</code> respectively</li>
        </ul>
      </li>
    </ul>

    <p><strong>Description:</strong></p>

    <p>This function is a decorator (similar to <code class="highlighter-rouge">maybe</code>). <a href="../slides/04/higher-order-functions-continued.html">See the slides on the decorator pattern</a> for background information. It builds on top of the example in the slides by actually <em>modifying</em> the return value of the original function.</p>

    <p>This function wraps the function <code class="highlighter-rouge">fn</code> in another function so that operations can be performed before and after the original function <code class="highlighter-rouge">fn</code> is called. This can be used to modify incoming arguments, modify the return value, or do any other task before or after the function call. Again, we&#39;ll be modifying the return value in this case.</p>

    <p>This particular decorator function constrains the result of the function being wrapped, <code class="highlighter-rouge">fn</code> so that its return value fits between <code class="highlighter-rouge">min</code> and <code class="highlighter-rouge">max</code> inclusive. If these are omitted from the original outer function, then the newly returned function will just return the value unmodified. You can assume that the return value of <code class="highlighter-rouge">fn</code> is <code class="highlighter-rouge">Number</code> (you do not have to deal with other types).</p>

    <p><strong>Example:</strong></p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// creates a new function from the built-in function, parseInt
// the new function is the same thing as parseInt, but it constrains
// the return value to a value between min and max (inclusive)
const constrainedParseInt = constrainDecorator(parseInt, -10, 10);

// still works like the original parseInt
constrainedParseInt("7") // --&gt; 7
constrainedParseInt("-10")) // --&gt; -10

// but if the return value is less than min or greater than max
// it returns min or max respectively
constrainedParseInt("-12") // --&gt; -10
constrainedParseInt("12")) // --&gt; 10

// however, if either min or max are missing, then the new function
// returns the result of fn unmodified regardless of value
var constrainedParseInt2 = constrainDecorator(parseInt);
constrainedParseInt2("-12") // --&gt; -12
</code></pre></div>    </div>

    <hr />

    <h3 id="limitcallsdecoratorfn-n"><code class="highlighter-rouge">limitCallsDecorator(fn, n)</code></h3>

    <p><strong>Parameters:</strong></p>

    <ul>
      <li><code class="highlighter-rouge">fn</code> - the function to modify (<em>decorate</em>)</li>
      <li><code class="highlighter-rouge">n</code> - the number of times that <code class="highlighter-rouge">fn</code> is allowed to be called</li>
    </ul>

    <p><strong>Returns:</strong></p>

    <ul>
      <li><code class="highlighter-rouge">function</code> - a function that&#8230;
        <ul>
          <li>does the same thing as the original function, <code class="highlighter-rouge">fn</code> (that is, it calls the original function)</li>
          <li>but can only be called <code class="highlighter-rouge">n</code> times</li>
          <li>after the <code class="highlighter-rouge">n</code>th call, the original function, <code class="highlighter-rouge">fn</code> will not be called, and the return value will always be <code class="highlighter-rouge">undefined</code></li>
        </ul>
      </li>
    </ul>

    <p><strong>Description:</strong></p>

    <p>This is the culmination of all of the concepts from the previous functions. However, instead of just reading from a variable that&#39;s available through the closure, you&#39;ll use it to keep track of the number of times that a function is called&#8230; and prevent the function from being called again if it goes over the <code class="highlighter-rouge">max</code> number of allowed function calls. Here are the steps you&#39;ll go through to implement this:</p>

    <ol>
      <li>create your decorator (function)</li>
      <li>create a local variable to keep track of the number of calls</li>
      <li>create an inner function to return
        <ul>
          <li>the inner function will check if the number of calls is less than the max number of allowed calls</li>
          <li>if it&#39;s still under max, call the function, <code class="highlighter-rouge">fn</code> (allow all arguments to be passed), return the return value of calling <code class="highlighter-rouge">fn</code>, and increment the number of calls</li>
          <li>if it&#39;s over max, just return <code class="highlighter-rouge">undefined</code> immediately without calling the original function</li>
        </ul>
      </li>
    </ol>

    <p><strong>Example:</strong></p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>const = limitedParseInt = limitCallsDecorator(parseInt, 3);
limitedParseInt("423") // --&gt; 423
limitedParseInt("423") // --&gt; 423 
limitedParseInt("423") // --&gt; 423
limitedParseInt("423") // --&gt; undefined
</code></pre></div>    </div>

    <hr />

    <h3 id="filterwithfn"><code class="highlighter-rouge">filterWith(fn)</code></h3>

    <p><strong>Parameters:</strong></p>

    <ul>
      <li><code class="highlighter-rouge">fn</code> - a <em>callback</em> function that takes in a single argument and returns a value (it will eventually operate on every element in an array)</li>
    </ul>

    <p><strong>Returns:</strong></p>

    <ul>
      <li><code class="highlighter-rouge">function</code> - a function that&#8230;
        <ul>
          <li>has 1 parameter, an <code class="highlighter-rouge">Array</code></li>
          <li>returns a new Array where only elements that cause <code class="highlighter-rouge">fn</code> to return <code class="highlighter-rouge">true</code> are present (all other elements from the old Array are not included)_</li>
        </ul>
      </li>
    </ul>

    <p>_Description:__</p>

    <p>This is different from regular filter. The regular version of filter immediately calls the callback function on every element in an Array to return a new Array of filtered elements. <code class="highlighter-rouge">filterWith</code>, on the other hand, gives back a function rather than executing the callback immediately (think of the difference between bind and call/apply). <code class="highlighter-rouge">filterWith</code> is basically a function that turns another function into a filtering function (a function that works on Arrays).</p>

    <p><strong>Example:</strong></p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// original even function that works on Numbers
function even(n) {return n % 2 === 0;} 

// create a 'filter' version of the square function
filterWithEven = filterWith(even); 

// now square can work on Arrays of Numbers!
console.log(filterWithEven([1, 2, 3, 4])); // [2, 4]    

const nums = [1, NaN, 3, NaN, NaN, 6, 7];
const filterNaN = filterWith(n =&gt; !isNaN(n));
console.log(filterNaN(nums)); // [1, 3, 6, 7]
</code></pre></div>    </div>

    <hr />

    <h3 id="simpleiniparses"><code class="highlighter-rouge">simpleINIParse(s)</code></h3>

    <p><strong>Parameters:</strong></p>

    <ul>
      <li><code class="highlighter-rouge">s</code> - a string that contains data in a simplified <a href="https://en.wikipedia.org/wiki/INI_file">INI format</a></li>
    </ul>

    <p><strong>Returns:</strong></p>

    <ul>
      <li><code class="highlighter-rouge">object</code> - an <code class="highlighter-rouge">object</code> that represents the data in the string as keys and values</li>
    </ul>

    <p><strong>Description:</strong></p>

    <p>For this function, we&#39;ll assume that the string being passed in is in a simplified INI format:</p>

    <p>Name and value pairs are separated by new lines. Each line has a name on the left side and a value on the right side. An equals sign with no spaces separates the name and the value. For example, the following string literal is in INI format - <code class="highlighter-rouge">"foo=bar\nbaz=qux\nquxx=corge"</code>. When printed (or if within a file) the content would look like:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>foo=bar
baz=qux
quxx=corge
</code></pre></div>    </div>

    <p>This function takes a string in INI format and parses its names and values as properties and values in a JavaScript object. Consequently, the string above, <code class="highlighter-rouge">"foo=bar\nbaz=qux\nquxx=corge"</code>, is parsed into: <code class="highlighter-rouge">{foo: 'bar', baz: 'qux', quxx: 'corge'}</code></p>

    <p>If duplicate names exist, the later name will overwrite the earlier name (for example, two foo=&#8230;, will result in the last foo= overriding the first).</p>

    <p>If there is no <code class="highlighter-rouge">=</code> sign, the line will be skipped.</p>

    <p>If there is an equal sign, but one side is missing (<code class="highlighter-rouge">=foo</code> or <code class="highlighter-rouge">foo=</code>), then treat the resulting name or value as &#39;&#39;.</p>

    <p><strong>Example:</strong></p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>let s = "foo=bar\nbaz=qux\nquxx=corge";
simpleINIParse(s); // {foo: 'bar', baz: 'qux', quxx: 'corge'} 

s = "foo=bar\nbaz=qux\nquxx=corge\nfoo=WAT";
simpleINIParse(s); // {foo: 'WAT', baz: 'qux', quxx: 'corge'}

s = "foo=bar\nbaz\nquxx=corge";
simpleINIParse(s); // {foo: 'bar', quxx: 'corge'};

s = "foo=bar\nbaz=\n=qux";
simpleINIParse(s); // {foo: 'bar', baz: '', '': 'qux'}
</code></pre></div>    </div>

    <hr />

    <h3 id="readfilewithfn"><code class="highlighter-rouge">readFileWith((fn)</code></h3>

    <p><strong>Parameters:</strong></p>

    <ul>
      <li><code class="highlighter-rouge">fn</code> - a <em>callback</em> function that takes in a single argument, a string of data, and parses it into a JavaScript object (or Array)&#8230; this function will eventually work on the data read in from a file using <code class="highlighter-rouge">fs.readFile</code>.</li>
    </ul>

    <p><strong>Returns:</strong></p>

    <ul>
      <li><code class="highlighter-rouge">function</code> - a function that reads a file and immediately parses it into a JavaScript object (or Array)
        <ul>
          <li>it has 2 parameters: the <code class="highlighter-rouge">fileName</code> of the file being read, and callback function specified by the caller to handle the parsedData</li>
          <li>this new function does not return anything; instead, it runs the callback function supplied after it reads in the file</li>
        </ul>
      </li>
    </ul>

    <p><strong>Description:</strong></p>

    <p>This combines many of the items from above and combines it with using callbacks / asynchronous programming.</p>

    <p>This function will take a parsing function and turn it into a function that opens a file and immediately parses it. This resulting function will be an async function (!) so it will take a callback as one of its arguments (this callback function is defined by the caller).</p>

    <p>The steps for <code class="highlighter-rouge">readFileWith</code> are:</p>

    <ol>
      <li>takes a parsing function as an argument</li>
      <li>returns a new function</li>
      <li>the new function will take a <code class="highlighter-rouge">fileName</code> and a callback as arguments</li>
      <li>it&#39;ll read a file using <code class="highlighter-rouge">fs.readFile</code> (make sure the <code class="highlighter-rouge">fs</code> module is <code class="highlighter-rouge">require</code>&#39;d in your project)
        <ul>
          <li>check out the <a href="https://nodejs.org/api/fs.html#fs_fs_readfile_file_options_callback">fs.readFile</a> docs</li>
          <li>use the <code class="highlighter-rouge">fileName</code> passed in to the new function as the file name for <code class="highlighter-rouge">readFile</code></li>
          <li>set the encoding when calling <code class="highlighter-rouge">readFile</code> to <code class="highlighter-rouge">utf8</code></li>
          <li>the callback supplied to <code class="highlighter-rouge">readFile</code> should:
            <ul>
              <li>parse the data resulting from a file read using the original parsing function, <code class="highlighter-rouge">fn</code> passed into <code class="highlighter-rouge">readFileWith</code> if there&#39;s no error</li>
              <li>call the callback passed into the new function with the err object (regardless of wheteher or not it&#39;s null/undefined) and the parsed data (again, regardless of whether or not it has a value or is <code class="highlighter-rouge">undefined</code>)</li>
              <li>if there is an error, the parsed data should be <code class="highlighter-rouge">undefined</code></li>
            </ul>
          </li>
        </ul>
      </li>
    </ol>

    <p>This is essentially a function that creates functions that reads and parses files.</p>

    <p><strong>Example:</strong></p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// assuming config.ini look like this:
foo=bar
baz=qux
quxx=corge

// use our simpleINIParse function from earlier!
const readFileWithSimpleINIParse = readFileWith(simpleINIParse);
readFileWithSimpleINIParse('tests/config.ini', (err, data) =&gt; {
    // within the callback, data is equal to
    //  {foo: 'bar', baz: 'qux', quxx: 'corge'}
});

// assuming config.json look like this:
{
"foo": "bar", 
"baz": [1, 2, 3]
}

const readFileWithJSONParse = readFileWith(JSON.parse);
readFileWithJSONParse('tests/config.json', (err, data) =&gt; {
    // within the callback, data is equal to
    // {foo: 'bar', baz: [1, 2, 3]};
});
</code></pre></div>    </div>

    <h3 id="test-lint-and-commit">Test, Lint and Commit</h3>

    <p>Once you&#39;re finished with your functions, remember to:</p>

    <ol>
      <li>make sure all tests are passing</li>
      <li>make sure that eslint shows no errors</li>
      <li>commit and push your code!</li>
    </ol>

    <h2 id="part-2---processing-yelp-business-data-reading-from-a-local-json-file">Part 2 - Processing Yelp Business Data, Reading from a local JSON file</h2>

    <p>In this part, you&#39;ll work with JSON restaurant data from yelp. The original data was sourced from <a href="https://www.yelp.com/dataset">https://www.yelp.com/dataset</a>. A subset of the data has been made available through the course site and your repository. You&#39;ll be using this data to extract a few analytics.</p>

    <p>You&#39;ll be using two files for this:</p>

    <ol>
      <li><code class="highlighter-rouge">yelpfunc.js</code> to create a function called <code class="highlighter-rouge">processYelpData</code>
        <ul>
          <li>the function will take an <code class="highlighter-rouge">Array</code> of objects with each object representing a restaurant</li>
        </ul>
      </li>
      <li><code class="highlighter-rouge">report.js</code> to read in and parse JSON data (first a local file, then download from a url) and use the <code class="highlighter-rouge">processYelpData</code> above to create a report</li>
    </ol>

    <h3 id="importing-data">Importing Data</h3>

    <ul>
      <li>Download and uncompress business.json.gz from the link given in piazza
        <ul>
          <li>save it in a folder outside of your git repository</li>
        </ul>
      </li>
      <li>Create <code class="highlighter-rouge">src/report.js</code>&#8230;</li>
      <li>Start by reading in the file <code class="highlighter-rouge">business.json</code> (remember, uncompress the .gz file from above first) using <code class="highlighter-rouge">fs.readFile</code> (you can use the absolute path)
        <ul>
          <li>make sure that the module is brought in using <code class="highlighter-rouge">require</code>, then call the function)</li>
          <li><strong>do not use readFileSync</strong></li>
        </ul>
      </li>
      <li>See the docs on <code class="highlighter-rouge">fs.readFile</code> (hint: make sure you specify <code class="highlighter-rouge">utf8</code> as the second argument)</li>
      <li>The file that you read in contains restaurants
        <ul>
          <li>there&#39;s one restaurant per line</li>
          <li>each restaurant is represented by a single JSON object
            <ul>
              <li><strong>the last line may contain a an object with a nextFile property</strong> &#8230;<strong>this object is not a restaurant and should be skipped / ignored</strong> (you&#39;ll use this later)</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Find a way to read in and parse the contents of the file so that:
        <ul>
          <li>leading and trailing white space is removed from the initial contents (use the string method, <code class="highlighter-rouge">trim</code>)</li>
          <li>each line of JSON is parsed into an actual JavaScript object
            <ul>
              <li>(the last line may contain an object that isn&#39;t a restaurant; it should not be included in the report generation below)</li>
            </ul>
          </li>
          <li>each resulting object is placed into an <code class="highlighter-rouge">Array</code> for later processing</li>
          <li>you can check out some <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a> and/or <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON">JSON</a> methods to do this</li>
          <li>note that the goal of this assignment is to work with higher order functions and JSON, so memory efficiency does not need to be taken into consideration</li>
        </ul>
      </li>
      <li>All of your parsing can only be done from within the callback function (or the function to be called once data is read from the file) that you supply to <code class="highlighter-rouge">fs.readFile</code></li>
      <li>Examine the resulting <code class="highlighter-rouge">Array</code> &#8230; (for example, try printing it out!)</li>
      <li>Later, you will be supplying this <code class="highlighter-rouge">Array</code> to the <code class="highlighter-rouge">procesYelpData</code> function to generate a report.</li>
      <li>To verify your file reading and parsing, you can try:
        <ul>
          <li>printing the name, rating and location of the 81st business entry in the file in the format: &#39;{name} is a business located in {city} with a rating of {stars} and {reviews} reviews.&#39;</li>
          <li>the result should be:
            <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>The Great Canadian Pizza Company is a business located in Mississauga with 4 stars and 18 reviews.
</code></pre></div>            </div>
          </li>
        </ul>
      </li>
    </ul>

    <h3 id="examining-the-data">Examining the Data</h3>

    <ul>
      <li>Assuming that your parsed data is in a variable called <code class="highlighter-rouge">data</code> &#8230;</li>
      <li><code class="highlighter-rouge">data</code> will be an <code class="highlighter-rouge">Array</code> of JSON objects (each line should have been parsed from JSON before pushing into the <code class="highlighter-rouge">data</code> array)</li>
      <li>Each object in <code class="highlighter-rouge">data</code> contains location data, attributes, and categories.</li>
    </ul>

    <p>Below is a sample for a business that is a restaurant serving Mexican &amp; Burgers, is located in San Francisco (CA), has been reviewed 1198 times and has an average rating of 4.5</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    // string, 22 character unique string business id
    "business_id": "tnhfDv5Il8EaGSXZGiuQGg",

    // string, the business's name
    "name": "Garaje",

    // string, the neighborhood's name
    "neighborhood": "SoMa",

    // string, the full address of the business
    "address": "475 3rd St",

    // string, the city
    "city": "San Francisco",

    // string, 2 character state code, if applicable
    "state": "CA",

    // string, the postal code
    "postal code": "94107",

    // float, latitude
    "latitude": 37.7817529521,

    // float, longitude
    "longitude": -122.39612197,

    // float, star rating, rounded to half-stars
    "stars": 4.5,

    // interger, number of reviews
    "review_count": 1198,

    // integer, 0 or 1 for closed or open, respectively
    "is_open": 1,

    // object, business attributes to values. note: some attribute values might be objects
    "attributes": {
        "RestaurantsTakeOut": true,
        "BusinessParking": {
            "garage": false,
            "street": true,
            "validated": false,
            "lot": false,
            "valet": false
        },
    },

    // an array of strings of business categories
    "categories": [
        "Mexican",
        "Burgers",
        ...
    ],

    // an object of key day to value hours, hours are using a 24hr clock
    "hours": {
        "Monday": "10:00-21:00",
        "Tuesday": "10:00-21:00",
        ...
    }
}
</code></pre></div>    </div>

    <h3 id="analytics">Analytics</h3>

    <h4 id="the-processyelpdata-function">The <code class="highlighter-rouge">processYelpData</code> Function</h4>

    <p>You&#39;ll create a function to generate a report (as a string) based on Yelp data.</p>

    <h3 id="processyelpdatarestaurants"><code class="highlighter-rouge">processYelpData(restaurants)</code></h3>

    <p><strong>Parameters:</strong></p>

    <ul>
      <li><code class="highlighter-rouge">restaurants</code> - an <code class="highlighter-rouge">Array</code> of objects, with each object representing a restaurant / business</li>
    </ul>

    <p><strong>Returns:</strong></p>

    <ul>
      <li>a string containing a report based on the data passed in</li>
    </ul>

    <p><strong>Description:</strong></p>

    <p>This function will generate a report based on the <code class="highlighter-rouge">Array</code> of objects passed in. The report will contain the average stars for all businesses in the file, the most common business name in the file, etc. (see full description of report requirements below)</p>

    <h3 id="implementation-requirements">Implementation Requirements</h3>

    <ol>
      <li>When creating your report in <code class="highlighter-rouge">processYelpData</code>, you must use all of the following Array methods at least once each in your program:
        <ul>
          <li><code class="highlighter-rouge">forEach</code></li>
          <li><code class="highlighter-rouge">filter</code></li>
          <li><code class="highlighter-rouge">map</code></li>
          <li><code class="highlighter-rouge">reduce</code></li>
          <li>There will be a small penalty for each one not used (-2).</li>
        </ul>
      </li>
      <li>Maintain the order of the restaurants in the file for the section that requires pizza places in Las Vegas (the order that they are printed out should be the order that they appear in the file)</li>
    </ol>

    <h3 id="report-overview">Report Overview</h3>

    <p>Your report will use the data passed in to determine:</p>

    <ol>
      <li>the average stars of all of the businesses</li>
      <li>the names of all of the pizza places in Las Vegas</li>
      <li>the two Mexican restaurants with the most reviews</li>
      <li>the most common name in the data set</li>
      <li>the number of restaurants per state</li>
    </ol>

    <p>See the following details&#8230;</p>

    <h3 id="average-stars-rating">Average Stars (Rating)</h3>

    <ul>
      <li>Include the average stars (rating) of all the records in the file; format to have at least two decimal places. Example output below:</li>
    </ul>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* Average Rating of the dataset: 3.61
</code></pre></div>    </div>

    <h3 id="all-the-pizza-places-in-las-vegas-nv">All the Pizza places in Las Vegas, NV</h3>

    <ul>
      <li>Find all the restaurants that serve &#39;Pizza&#39; and are located in the city of &#39;Las Vegas&#39;, in the state of &#39;NV&#39;. Include each place&#39;s rating too. Example output below:</li>
    </ul>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* All restaurants in Las Vegas, NV that serve pizza:
    * Spago by Wolfgang Puck (* 4 stars *)
    * Grimaldi's Pizzeria (* 4 stars *)
    * Mama Cimino's (* 2.5 stars *)
    * Noble Roman's Pizza (* 2 stars *)
    * The Locker Room (* 3.5 stars *)
</code></pre></div>    </div>

    <h3 id="the-two-mexican-restaurants-with-the-most-reviews">The two Mexican restaurants with the most reviews</h3>

    <p>Use the <code class="highlighter-rouge">review_count</code> field to find the two Mexican restaurants with the most reviews. Example output below:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* The two highest reviewed Mexican serving restaurants are:
    * The Mission Old Town, Scottsdale (AZ), 1539 reviews (* 4 stars *)
    * Mariscos Playa Escondida, Las Vegas (NV), 330 reviews (* 4.5 stars *)
</code></pre></div>    </div>

    <h3 id="the-most-common-name-in-the-dataset">The most common name in the dataset</h3>

    <p>Find the name that occurs the most frequently in the dataset. Example output below:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* Starbucks is the most common business and appears 8 times in the dataset
</code></pre></div>    </div>

    <h3 id="restaurant-count-for-each-state">Restaurant Count for Each &quot;State&quot;</h3>

    <p>Count the number of restaurants for each state that occurs in the file. This file contains data from businesses outside of the US, so state abbreviations are not constrained to 2 letters. Example output below</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* Restaurant count by state
    * AZ: 602
    * BW: 42
    * EDH: 52
    * ELN: 1
    * ESX: 1
    * FIF: 2
    * HLD: 4
    * IL: 19
    * MLN: 3
    * NC: 152
    * NI: 1
    * NV: 329
    * NYK: 1
    * OH: 154
    * ON: 363
    * PA: 126
    * QC: 88
    * SC: 2
    * WI: 58
</code></pre></div>    </div>

    <h3 id="return-value">Return Value</h3>

    <p>All of the analytics should be coalesced into a single large string representing the analytic report.</p>

    <p>This string should be returned by your <code class="highlighter-rouge">processYelpData</code> function in your module, <code class="highlighter-rouge">yelpfunc.js</code></p>

    <h3 id="calling-processyelpdata">Calling processYelpData</h3>

    <p>Now that you&#39;ve finished your function, you can try calling it on your data from <code class="highlighter-rouge">report.js</code></p>

    <ol>
      <li>In report.js: require the module that you created.</li>
      <li>Use your function on the data that you parsed from reading in the <code class="highlighter-rouge">business.json</code> file.</li>
      <li>Print out the resulting string.</li>
      <li>You can compare your output with the example output below</li>
    </ol>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* Average Rating of the dataset: 3.61

* All restaurants in Las Vegas, NV that serve pizza
    * Spago by Wolfgang Puck (* 4 stars *)
    * Grimaldi's Pizzeria (* 4 stars *)
    * Mama Cimino's (* 2.5 stars *)
    * Noble Roman's Pizza (* 2 stars *)
    * The Locker Room (* 3.5 stars *)

* The two highest reviewed Mexican serving restaurants are:
    * The Mission Old Town, Scottsdale (AZ), 1539 reviews (* 4 stars *)
    * Mariscos Playa Escondida, Las Vegas (NV), 330 reviews (* 4.5 stars *)

* The most common name in the dataset:
    * Starbucks is the most common business and appears 8 times in the dataset

* Restaurant count by state
    * AZ: 602
    * BW: 42
    * EDH: 52
    * ELN: 1
    * ESX: 1
    * FIF: 2
    * HLD: 4
    * IL: 19
    * MLN: 3
    * NC: 152
    * NI: 1
    * NV: 329
    * NYK: 1
    * OH: 154
    * ON: 363
    * PA: 126
    * QC: 88
    * SC: 2
    * WI: 58
</code></pre></div>    </div>

    <p>Lint, commit and push your code; the next part will make modifications to this existing code (you can overwrite your work in this file directly for the next part).</p>

    <h2 id="part-3---retrieve-json-from-url">Part 3 - Retrieve JSON from URL</h2>

    <h3 id="setup-for-retrieving-json">Setup for Retrieving JSON</h3>

    <p>In this part, you&#39;ll be setting up your project to work with JSON data from a url:</p>

    <ol>
      <li>Install the requests library in your project&#39;s root folder: <code class="highlighter-rouge">npm install --save request</code> (similar to installing <code class="highlighter-rouge">readline-sync</code> in the previous assignment)</li>
      <li>Add the module to the beginning of <code class="highlighter-rouge">report.js</code> using <code class="highlighter-rouge">require</code></li>
      <li><strong>Comment out or delete reading from a local file</strong></li>
    </ol>

    <h3 id="retrieve-and-process-json-data">Retrieve and Process JSON Data</h3>

    <p>Instead of reading a local file, <strong>modify your program</strong> so that it requests JSON data from a specified url. This URL will be distributed via piazza (see a pinned note). Again, there will be one additional object in the last line of the file:</p>

    <p><code class="highlighter-rouge">{"nextFile": "4df1c5ef1280bee2e2b44167027d2469.json"}</code></p>

    <p>This last object has a key, <code class="highlighter-rouge">nextFile</code>, and the value represents the name of another file of business data (in the object above, the name of the next file is: <code class="highlighter-rouge">4df1c5ef1280bee2e2b44167027d2469.json</code>). This next section will explain how to retrieve this json file from the web.</p>

    <ul>
      <li>The URL for the dataset used in this assignment <strong>will be posted on piazza</strong></li>
      <li><a href="https://github.com/mikeal/request">Read the documentation</a> to see how to use the requests module (or see the <a href="../slides/js/js-node-npm-debug-git.html#/6">slides</a>)</li>
      <li>Notice that the data is only available within the callback that you pass in to calling <code class="highlighter-rouge">request</code> (much like using readFile)</li>
      <li>Again, a <strong>callback</strong> is a function passed as an argument to another function&#8230; the callback will be invoked / executed at a later time, when some event is triggered</li>
      <li>In the case of <code class="highlighter-rouge">request</code>, it&#39;s the function that you pass in as the 2nd argument</li>
      <li>(The call to your report generation should be moved to the callback of request&#8230;)</li>
      <li>Parse the body of the response from <code class="highlighter-rouge">request</code> into an Array of objects (similar to how you processed the file in the previous part)
        <ul>
          <li>Leading and trailing white space should removed from the initial contents (use the string method, <code class="highlighter-rouge">trim</code>) before parsing (again, same as the previous part)</li>
          <li>For now, you can ignore the last object that contains <code class="highlighter-rouge">nextFile</code></li>
          <li>Modify your script if necessary to ignore that line</li>
        </ul>
      </li>
      <li>Print out the url of the file you requested
  <code class="highlighter-rouge">==========
url:  `https://some.domain/and/path/to/file.json
==========</code></li>
      <li>Finally, print out the result of calling <code class="highlighter-rouge">processYelpData</code> on the parsed response</li>
    </ul>

    <p>When you run your report again, the output should looks similar to your previous version, though some of the data will be different.</p>

    <h3 id="get-next-json-files">Get Next JSON Files</h3>

    <p>Now, instead of running this report on a single url, you&#39;ll download several files. You will not know the URLs of the subsequent files in advance. Instead, you&#39;ll have to examine the <code class="highlighter-rouge">nextFile</code> property of the last object in the initial JSON data requested.</p>

    <ul>
      <li>Print out the URL that you&#39;re retrieving before running a report for each file/url</li>
      <li>The last object from the JSON file contains a <code class="highlighter-rouge">nextFile</code> property;</li>
      <li>The <code class="highlighter-rouge">nextFile</code> property contains the next file to retrieve</li>
      <li>Construct a new URL based on that filename and print out the new URL</li>
      <li>Use the <code class="highlighter-rouge">request</code> library again to retrieve and process the data from this new URL</li>
      <li>Continue to do this until you encounter a file that does not have an object with a <code class="highlighter-rouge">nextFile</code> property as its last line</li>
    </ul>

    <pre name="hw02-sample" id="hw02-sample"><code data-trim="" contenteditable="">
==========
url:  ...
==========
* Average Rating of the dataset: 3.6134432783608195

* All restaurants in Las Vegas, NV that serve pizza
    * Ray's Pizzeria and Restaurant (* 2.5 stars *)
    * Bambino's East Coast Pizzeria (* 4.5 stars *)
    * Papa John's Pizza (* 2 stars *)
    * Bonanno's New York Pizzeria (* 3 stars *)
    * Hunt &amp; Gather Cafe (* 4 stars *)
    * CiCi's Pizza (* 3.5 stars *)
    * Marco's Pizza (* 3.5 stars *)
    * Taqueria El Capullo (* 4.5 stars *)

* The two highest reviewed Mexican serving restaurants are:
    * Taco Guild, Phoenix (AZ), 958 (* 4 stars *)
    * Jose Cuervo Tequileria, Las Vegas (NV), 414 (* 2 stars *)

* The most common name in the dataset:
    * Starbucks

* Restaurant count by state
    * 01: 2
    * AZ: 546
    * BW: 36
    * C: 1
    * EDH: 45
    * ELN: 1
    * ESX: 1
    * HLD: 2
    * IL: 24
    * MLN: 3
    * NC: 166
    * NV: 369
    * NY: 1
    * NYK: 1
    * OH: 154
    * ON: 376
    * PA: 114
    * QC: 95
    * SC: 9
    * WI: 54


.
.
.
(more urls processed here...)
.
.
.


==========
url:  https://...
==========
* Average Rating of the dataset: 3.64325

* All restaurants in Las Vegas, NV that serve pizza
    * Pizza Hut (* 1 stars *)
    * Vit's Pizza (* 2.5 stars *)
    * Napoli Pizza (* 3 stars *)
    * Home Plate Grill &amp; Bar (* 4 stars *)
    * Pizza My Dear (* 4 stars *)
    * Due Pizzeria (* 4.5 stars *)
    * Pizza Hut (* 2 stars *)

* The two highest reviewed Mexican serving restaurants are:
    * Otro Cafe, Phoenix (AZ), 541 (* 4 stars *)
    * ZÃ³calo TequilerÃ­a, Cleveland (OH), 381 (* 2.5 stars *)

* The most common name in the dataset:
    * Starbucks

* Restaurant count by state
    * AZ: 543
    * BW: 44
    * EDH: 53
    * FIF: 2
    * HLD: 1
    * IL: 17
    * MLN: 5
    * NC: 160
    * NV: 385
    * NYK: 1
    * OH: 168
    * ON: 359
    * PA: 109
    * QC: 103
    * SC: 5
    * WI: 42
    * WLN: 3
</code></pre>

  </div>

</div>
:ET